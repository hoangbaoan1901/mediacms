{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block headtitle %}Edit media - {{PORTAL_NAME}}{% endblock headtitle %}

{% block headermeta %}
<link rel="stylesheet" href="{% static 'video_editor/video-editor.css' %}">
<style>
.user-action-form-inner {
    max-width: 1280px !important;
}
</style>
{% endblock headermeta %}

{% block innercontent %}

    <div class="user-action-form-wrap">
		<div class="user-action-form-inner">
			<h1>Edit Media</h1>

            <script>
                window.MEDIA_DATA = {
                    // videoUrl: "{{ media_file_path }}",
                    videoUrl: "http://temp.web357.com/SampleVideo_1280x720_30mb.mp4",
                    chapters: [
                        {
                            id: "1",
                            title: "Chapter AAA",
                            timestamp: 0
                        },
                        {
                            id: "2",
                            title: "Chapter BBB",
                            timestamp: 10
                        },
                        {
                            id: "3",
                            title: "Chapter CCC",
                            timestamp: 20
                        }
                    ]
                };
            </script>

            <!-- Mount point for React app -->
            <div id="video-editor-root"></div>
            
			<form enctype="multipart/form-data" action="" method="post" class="post-form">
				{% csrf_token %}
				{{ form|crispy }}
				<button class="primaryAction" type="submit">Update Media</button>
			</form>
		</div>
	</div>

    <!-- Add data for React components -->
    <script src="{% static 'video_editor/video-editor.js' %}"></script>
{% endblock innercontent %}

{% block extrajs %}
    <!-- Load React app after DOM is ready -->
    <script>
        console.log("Loading video editor script...");
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOMContentLoaded event fired");
            const script = document.createElement('script');
            script.src = "{% static 'video_editor/video-editor.js' %}";
            script.onload = function() {
                console.log("Video editor script loaded");
            };
            document.body.appendChild(script);
        });
    </script>
{% endblock extrajs %}

